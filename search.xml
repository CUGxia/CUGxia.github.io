<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[win7x64 下 redis 的安装]]></title>
    <url>%2F2018%2F02%2F11%2Fwin7x64%E4%B8%8Bredis%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[前言近期项目需要使用 redis, 故在本地安装以便测试。 下载redis 官方没有适配 windows 平台，但 MicrosoftArchive 在 github 上有安装包。github 下载地址本地为win7x64系统，故下载的 Redis-x64-3.2.100.msi可能需要科学上网。 安装按步骤开始安装安装完成后，检查系统服务中是否有 Redis，若有则说明已经成功安装。 测试在 Redis 安装目录下，输入1redis-cli.exe -h 127.0.0.1 -p 6379 测试 Redis ，测试结果。 可视化管理Redis 可视化管理工具推荐 redis-desktop-manager下载 Windows 版本并安装，配置 ip 和端口完成后即可对 Redis 键值进行可视化管理！ 后记至此本地环境已搭建完成！后面可能会较多用到 Redis 进行项目开发，近期需要熟悉。]]></content>
  </entry>
  <entry>
    <title><![CDATA[CI框架常用数据库操作技巧]]></title>
    <url>%2F2018%2F01%2F28%2FCI%E6%A1%86%E6%9E%B6%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[前言近期在CI框架下开发了多个项目(准确说是接盘哈哈)，在增改删查中也学习了不少的小技能~留下以后备查~ 数据库增改删查作为最基本的数据库操作，写起来代码冗余。等我琢磨一下看能不能封装一层 Model ，减去这些冗余的操作。 查询分页在对大量数据进行查询时，经常要用到分页查询操作。1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public function get($param1 = null, $param2 = null, $param3 = null, $order_by = null, $direction = 'DESC', $page_size = 30, $page_index = 1)&#123; //表名 $table_name='database_table_1'; /* * 筛选条件,可根据需求进行调整 */ if ($param1) &#123; $this-&gt;db-&gt;where('param1', $param1); &#125; if ($param2) &#123; $this-&gt;db-&gt;where('param2', $param2); &#125; if ($param3) &#123; $this-&gt;db-&gt;like('param3', $param3); &#125; //排序 if ($order_by) &#123; if (!$this-&gt;db-&gt;field_exists($order_by,$table_name)) &#123; //字段不存在 $this-&gt;msg = '该筛选字段不存在'; $this-&gt;code = 10022; return false; &#125; else &#123; $this-&gt;db-&gt;order_by($order_by, $direction == null ? 'DESC' : $direction); &#125; &#125; //统计总条数 $result_nums = $this-&gt;db-&gt;count_all_results($table_name,false); $page_size = intval($page_size); //分页 $page_index = intval($page_index); $limit = 0; $offset = 30; if ($page_index &gt;= 1) &#123; $offset = ($page_index - 1) * $page_size; $limit = $page_size; &#125; $this-&gt;db-&gt;limit($limit, $offset); $query = $this-&gt;db-&gt;get(); $result = $query-&gt;result_array(); //重组返回结果 $result_new = array(); if ($result) &#123; $this-&gt;msg = '查到相关记录'; $this-&gt;code = 0; $result_new['page_index'] = $page_index; $result_new['page_size'] = $page_size; $result_new['count'] = $result_nums; $result_new['records'] = $result; &#125; else &#123; $this-&gt;msg = '未查到相关记录！'; $this-&gt;code = 10023; return false; &#125; return $result_new;&#125; 只需要稍微修改 $table_name 以及相关参数，就能完成筛选、排序和分页等操作。 批量更新当有大部分数据需要进行同步时，考虑到效率问题以及相关的操作复杂度。最初我用的自己构造的sql语句进行操作，但效率很低，而且很繁琐。原sql语句：1SET name= CASE mobile WHEN '16688889999' THEN '小明' WHEN '19966665555' THEN '小红'...END 但是效率低、构造困难。后发现 CI 自带批量更新。官方文档 1234567891011121314151617181920//需求,已知 mobile，从其他接口查询到 name 和 department，需要同步到本地。$data=array( array( 'name'='小明', 'mobile'='16688889999', 'department'=&gt;'信息部' ), array( 'name'='小红', 'mobile'='19966665555', 'department'=&gt;'体育部' ), array( 'name'='小张', 'mobile'='16536556986', 'department'=&gt;'科技部' ));//以 mobile 为条件,当 mobile 与原表中的某行的 mobile 字段数值对应时，更新 name,department 字段。$re=$this-&gt;db-&gt;update_batch('database_table_1',$data,'mobile'); 分组统计当需要统计分析每小时/每天/每月/每年的记录时，时常会用到分组统计的功能。12345678910111213141516171819202122232425262728293031323334353637/* 24h内，按小时统计 */$this-&gt;db-&gt;select(&apos;DATE_FORMAT(s.insert_datetime,\&apos;%Y-%m-%d\&apos;) as date,HOUR(s.insert_datetime) as hour,s.status,count(1) as total&apos;);$this-&gt;db-&gt;where(&apos;TIMESTAMPDIFF(HOUR,DATE_FORMAT(s.insert_datetime,\&apos;%Y-%m-%d %H:%m:%s\&apos;),CURTIME())&lt;=24&apos;);$this-&gt;db-&gt;group_by(&apos;s.status,DATE_FORMAT(s.insert_datetime,\&apos;%Y-%m-%d %H\&apos;)&apos;);$this-&gt;db-&gt;order_by(&apos;date&apos;,&apos;ASC&apos;);$result=$this-&gt;db-&gt;get() -&gt;result_array();/* * 结果后处理,显示 count 为0 */$datetime_now = new DateTime();$datetime_old = new DateTime();date_sub($datetime_old, date_interval_create_from_date_string(&quot;23 hours&quot;));for (; $datetime_old-&gt;getTimestamp() &lt;= $datetime_now-&gt;getTimestamp(); date_add($datetime_old, date_interval_create_from_date_string(&quot;1 hours&quot;))) &#123; $status = array(&apos;发送成功&apos;, &apos;发送失败&apos;); foreach ($status as $s) &#123; # 筛选是否存在 $flag = 0; if ($result) &#123; foreach ($result as $key =&gt; $row) &#123; if ($row[&apos;date&apos;] == $datetime_old-&gt;format(&apos;Y-m-d&apos;) AND $row[&apos;hour&apos;] == $datetime_old-&gt;format(&apos;H&apos;) AND $row[&apos;status&apos;] == $s) &#123; $flag = 1; &#125; &#125; &#125; //若不存在,则插入 if (!$flag) &#123; array_push($result, array( &apos;date&apos; =&gt; $datetime_old-&gt;format(&apos;Y-m-d&apos;), &apos;hour&apos; =&gt; strval(intval($datetime_old-&gt;format(&apos;H&apos;))), &apos;status&apos; =&gt; $s, &apos;total&apos; =&gt; 0 )); &#125; &#125;&#125;$result = arraySequence($result, &apos;date&apos;, &apos;SORT_ASC&apos;); 总结都是一些经常用到的东西，记录一下，以后备查~]]></content>
      <categories>
        <category>CI</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>CI</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSR_CUGER 使用教程]]></title>
    <url>%2F2018%2F01%2F28%2FSSR-CUGER-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[前言本平台仅供地大学子用于学术科研、学业研究，严禁用于非法用途！ 注册账号进入官方网站进行注册(需要邀请码，如无，请联系管理员 Email:cug.xia@gmail.com。 获取 SSR 链接 登录官方网站，进去用户主页后，点击节点列表，即可查看所有可用节点。 选择合适节点，操作-&gt;SSR链接-&gt;完整复制SSR链接 客户端配置SSR在各平台均有相应客户端，在此仅提供两种最常见的客户端配置教程，其它平台请自行搜索解决。 Android 端配置客户端下载Android 端 SSR 客户端下载 客户端配置打开SSR客户端，点击左上角 ShadowsocksR 进入配置文件，点击右下角+，从剪切板导入，即可将节点信息导入。 连接 SSR打开 SSR 软件，选择合适节点，点击右上角飞机，连接 SSR 。 Windows 端配置客户端下载Windows SSR客户端下载 客户端配置SSR 链接导入打开 Shadowsocksr 软件，状态栏寻找飞机图标，右键，从剪切板导入SSR链接，导入成功会弹窗出现SSR链接信息的编辑页面。 客户端其它配置 运行模式：可在直连/ PAC /全局模式进行切换，直连模式相当于没有开 SSR；PAC模式(推荐) 是自动选择，根据PAC配置文件，对不同网址采用不同的处理方案；全局模式则是系统所有网络请求都走 SSR，比较耗费流量而且可能国内网站速度较慢。 PAC配置：根据自身情况，调整 PAC 方案。 负载均衡：默认开启，当存在多个节点可用时，SSR会根据测试情况自动选择您所倾向的节点类型(速度快/延迟低)。 连接测试打开浏览器，输入www.google.com，检查是否能访问。 其它资费 本站为让更多用户能够享受福利，推出每月免费1G流量套餐，即每月不用支付任何资费； 套餐内流量，在免费套餐更换付费套餐时，即刻生效，并按当月剩余天数扣除相应的余额，充值相应流量。其它情况下更换套餐将下月生效； 本站所指的月为自然月。 充值用户登录后，点击我的信息即可查看当前余额，并可看到支付宝和微信收款码，扫码并备注id，后台收到后会及时进行充值～ 关于本网站由 Dorad 个人承建与维护，如有侵权或违规，请联系 Email:cug.xia@gmail.com 。]]></content>
      <categories>
        <category>SSR</category>
      </categories>
      <tags>
        <tag>SSR</tag>
        <tag>教程</tag>
      </tags>
  </entry>
</search>
